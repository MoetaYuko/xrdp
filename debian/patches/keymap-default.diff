From: Patch by Dag-Erling Sm√∏rgrav and Petter Reinholdtsen
Subject: Try a local default keymap before falling back to en-us keymap
 if the selected keymap is not found.
Forwarded: https://github.com/neutrinolabs/xrdp/pull/466
--- a/xrdp/lang.c
+++ b/xrdp/lang.c
@@ -233,7 +233,11 @@ get_keymaps(int keylayout, struct xrdp_k
     /* check if there is a keymap file */
     g_snprintf(filename, 255, "%s/km-%4.4x.ini", XRDP_CFG_PATH, keylayout);
 
-    /* if the file does not exist, try again with 'en-us' as fallback */
+    /* if the file does not exist, try the local default, and finally 'en-us' as fallback */
+    if (!g_file_exist(filename))
+    {
+        g_snprintf(filename, 255, "%s/km-default.ini", XRDP_CFG_PATH);
+    }
     if (!g_file_exist(filename))
     {
         g_snprintf(filename, 255, "%s/km-0409.ini", XRDP_CFG_PATH);
