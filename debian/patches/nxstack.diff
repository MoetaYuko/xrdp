From: Thorsten Glaser <tg@mirbsd.org>
Subject: re-enable non-executable stack
--- a/librfxcodec/src/amd64/cpuid_amd64.asm
+++ b/librfxcodec/src/amd64/cpuid_amd64.asm
@@ -46,3 +46,4 @@ PROC _cpuid_amd64
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/librfxcodec/src/x86/cpuid_x86.asm
+++ b/librfxcodec/src/x86/cpuid_x86.asm
@@ -44,3 +44,4 @@ PROC _cpuid_x86
     ret;
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/amd64/a8r8g8b8_to_a8b8g8r8_box_amd64_sse2.asm
+++ b/xorgxrdp/module/amd64/a8r8g8b8_to_a8b8g8r8_box_amd64_sse2.asm
@@ -195,3 +195,4 @@ done_loop_x:
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/amd64/a8r8g8b8_to_nv12_box_amd64_sse2.asm
+++ b/xorgxrdp/module/amd64/a8r8g8b8_to_nv12_box_amd64_sse2.asm
@@ -330,3 +330,4 @@ loop1:
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/amd64/cpuid_amd64.asm
+++ b/xorgxrdp/module/amd64/cpuid_amd64.asm
@@ -69,3 +69,4 @@ PROC _cpuid_amd64
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/amd64/i420_to_rgb32_amd64_sse2.asm
+++ b/xorgxrdp/module/amd64/i420_to_rgb32_amd64_sse2.asm
@@ -250,3 +250,4 @@ loop_x:
     align 16
 
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/amd64/uyvy_to_rgb32_amd64_sse2.asm
+++ b/xorgxrdp/module/amd64/uyvy_to_rgb32_amd64_sse2.asm
@@ -160,3 +160,4 @@ loop1:
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/amd64/yuy2_to_rgb32_amd64_sse2.asm
+++ b/xorgxrdp/module/amd64/yuy2_to_rgb32_amd64_sse2.asm
@@ -160,3 +160,4 @@ loop1:
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/amd64/yv12_to_rgb32_amd64_sse2.asm
+++ b/xorgxrdp/module/amd64/yv12_to_rgb32_amd64_sse2.asm
@@ -254,3 +254,4 @@ loop_x:
     align 16
 
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/x86/a8r8g8b8_to_a8b8g8r8_box_x86_sse2.asm
+++ b/xorgxrdp/module/x86/a8r8g8b8_to_a8b8g8r8_box_x86_sse2.asm
@@ -180,3 +180,4 @@ done_loop_x:
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/x86/a8r8g8b8_to_nv12_box_x86_sse2.asm
+++ b/xorgxrdp/module/x86/a8r8g8b8_to_nv12_box_x86_sse2.asm
@@ -324,3 +324,4 @@ loop1:
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/x86/cpuid_x86.asm
+++ b/xorgxrdp/module/x86/cpuid_x86.asm
@@ -67,3 +67,4 @@ PROC _cpuid_x86
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/x86/i420_to_rgb32_x86_sse2.asm
+++ b/xorgxrdp/module/x86/i420_to_rgb32_x86_sse2.asm
@@ -249,3 +249,4 @@ loop_x:
     align 16
 
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/x86/uyvy_to_rgb32_x86_sse2.asm
+++ b/xorgxrdp/module/x86/uyvy_to_rgb32_x86_sse2.asm
@@ -164,3 +164,4 @@ loop1:
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/x86/yuy2_to_rgb32_x86_sse2.asm
+++ b/xorgxrdp/module/x86/yuy2_to_rgb32_x86_sse2.asm
@@ -164,3 +164,4 @@ loop1:
     ret
     align 16
 
+section .note.GNU-stack noalloc noexec nowrite progbits
--- a/xorgxrdp/module/x86/yv12_to_rgb32_x86_sse2.asm
+++ b/xorgxrdp/module/x86/yv12_to_rgb32_x86_sse2.asm
@@ -249,3 +249,4 @@ loop_x:
     align 16
 
 
+section .note.GNU-stack noalloc noexec nowrite progbits
