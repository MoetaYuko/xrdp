From: Thorsten Glaser <tg@mirbsd.org>
Subject: donâ€™t spit on the console when starting
--- a/common/log.c
+++ b/common/log.c
@@ -387,11 +387,6 @@ internal_config_read_logging(int file, s
     /* try to create path if not exist */
     g_create_path(lc->log_file);
 
-    g_printf("logging configuration:\r\n");
-    g_printf("\tLogFile:       %s\r\n", lc->log_file);
-    g_printf("\tLogLevel:      %i\r\n", lc->log_level);
-    g_printf("\tEnableSyslog:  %i\r\n", lc->enable_syslog);
-    g_printf("\tSyslogLevel:   %i\r\n", lc->syslog_level);
     return LOG_STARTUP_OK;
 }
 
--- a/sesman/sesman.c
+++ b/sesman/sesman.c
@@ -209,6 +209,12 @@ main(int argc, char **argv)
 
     if (1 == argc)
     {
+	/* redirect stdout to logfile early, due to debug msgs */
+	if (g_file_exist("/var/log/xrdp-sesman.log")) {
+		g_file_close(1);
+		g_file_open("/var/log/xrdp-sesman.log");
+	}
+
         /* no options on command line. normal startup */
         g_printf("starting sesman...\n");
         daemon = 1;
--- a/xrdp/xrdp.c
+++ b/xrdp/xrdp.c
@@ -560,7 +560,6 @@ main(int argc, char **argv)
                    or systemd cannot detect xrdp daemon couldn't start properly */
                 g_exit(1);
             }
-            g_writeln("daemon process %d started ok", pid);
             /* exit, this is the main process */
             g_deinit();
             g_exit(0);
